@import model.FileFormData
@import helper._

@(fileForm: Form[model.FileFormData], username: String, repoName: String, path: String, initialContent: String, sha: Option[String])(implicit request: Request[AnyContent], messages: Messages)

@main("Create or Update File") {
<h1 class="text-center">Create or Update File in @repoName</h1>

<div class="form-container">
    @helper.form(action = routes.GitHubReposController.submitFileForm(username, repoName, path)) {
    @helper.CSRF.formField

    <p><strong>Editing File:</strong> @path</p>

    <!-- Hidden field to store the file name -->
    <input type="hidden" name="fileName" value="@path">

    <!-- Hidden input to hold the content that was edited in the IDE -->
    <input type="hidden" name="content" id="hidden-content" value="@initialContent">

    <div class="form-group centered-label-input">
        @helper.inputText(fileForm("message"), '_label -> "Commit Message", 'value -> fileForm("message").value.getOrElse(""))
    </div>

    <div class="form-group centered-label-input">
        @helper.inputText(fileForm("sha"), '_label -> "SHA (optional)", 'value -> sha.getOrElse(""))
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
    }

    <!-- Back to Repo button -->
    <a href="@routes.ApplicationController.getGitHubRepoContents(username, repoName)" class="btn btn-secondary mt-3">Back to Repo</a>
</div>
}

<!-- Add the necessary buttons and hidden input for the editor -->
<div class="button-container">
    <button id="edit-btn" class="btn btn-primary">Edit</button>
    <button id="save-btn" class="btn btn-success" style="display:none;">Save Changes</button>
</div>

<script src="/assets/javascripts/fileEditor.js"></script>c="/assets/javascripts/fileEditor.js"></script>